{"version":3,"sources":["../src/route.js"],"names":["$methods","$uri","$action","$name","$prefix","$bindings","trim","string","charAt","substr","length","Route","constructor","methods","uri","action","set","get","name","value","prefix","bindings","path","handle","handler","call","apply"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,WAAW,uBAAf;AAAA,IACIC,OAAO,uBADX;AAAA,IAEIC,UAAU,uBAFd;AAAA,IAGIC,QAAQ,uBAHZ;AAAA,IAIIC,UAAU,uBAJd;AAAA,IAKIC,YAAY,uBALhB;;AAOA,SAASC,IAAT,CAAcC,MAAd,EAAsB;AAClB,QAAIA,OAAOC,MAAP,CAAc,CAAd,KAAoB,GAAxB,EAA6B;AACzBD,iBAASA,OAAOE,MAAP,CAAc,CAAd,EAAiBF,OAAOG,MAAP,GAAgB,CAAjC,CAAT;AACH;;AAED,QAAIH,OAAOC,MAAP,CAAcD,OAAOG,MAAP,GAAgB,CAA9B,KAAoC,GAAxC,EAA6C;AACzCH,iBAASA,OAAOE,MAAP,CAAc,CAAd,EAAiBF,OAAOG,MAAP,GAAgB,CAAjC,CAAT;AACH;;AAED,WAAOH,MAAP;AACH;;AAED,MAAMI,KAAN,CAAY;AACRC,gBAAYC,OAAZ,EAAqBC,GAArB,EAA0BC,MAA1B,EAAkC;AAC9Bf,iBAASgB,GAAT,CAAa,IAAb,EAAmBH,OAAnB;AACAZ,aAAKe,GAAL,CAAS,IAAT,EAAeV,KAAKQ,GAAL,CAAf;AACAZ,gBAAQc,GAAR,CAAY,IAAZ,EAAkBD,MAAlB;AACAZ,cAAMa,GAAN,CAAU,IAAV,EAAgB,IAAhB;AACAZ,gBAAQY,GAAR,CAAY,IAAZ,EAAkB,IAAlB;AACAX,kBAAUW,GAAV,CAAc,IAAd,EAAoB,EAApB;AACH;;AAED,QAAIH,OAAJ,GAAc;AACV,eAAOb,SAASiB,GAAT,CAAa,IAAb,CAAP;AACH;;AAED,QAAIH,GAAJ,GAAU;AACN,eAAOb,KAAKgB,GAAL,CAAS,IAAT,CAAP;AACH;;AAED,QAAIF,MAAJ,GAAa;AACT,eAAOb,QAAQe,GAAR,CAAY,IAAZ,CAAP;AACH;;AAED,QAAIC,IAAJ,GAAW;AACP,eAAOf,MAAMc,GAAN,CAAU,IAAV,CAAP;AACH;;AAED,QAAIC,IAAJ,CAASC,KAAT,EAAgB;AACZhB,cAAMa,GAAN,CAAU,IAAV,EAAgBG,KAAhB;AACH;;AAED,QAAIC,MAAJ,GAAa;AACT,eAAOhB,QAAQa,GAAR,CAAY,IAAZ,CAAP;AACH;;AAED,QAAIG,MAAJ,CAAWD,KAAX,EAAkB;AACdf,gBAAQY,GAAR,CAAY,IAAZ,EAAkBV,KAAKa,KAAL,CAAlB;AACH;;AAED,QAAIE,QAAJ,GAAe;AACX,eAAOhB,UAAUY,GAAV,CAAc,IAAd,CAAP;AACH;;AAED,QAAIK,IAAJ,GAAW;AACP,eAAO,CAAClB,QAAQa,GAAR,CAAY,IAAZ,MAAsB,IAAtB,GAA6B,MAAMb,QAAQa,GAAR,CAAY,IAAZ,CAAnC,GAAuD,EAAxD,IAA8D,GAA9D,GAAoEhB,KAAKgB,GAAL,CAAS,IAAT,CAA3E;AACH;;AAEKM,UAAN,GAAe;AAAA;AAAA;;AAAA;AACX,gBAAIC,UAAU,MAAMtB,QAAQe,GAAR,QAAkBQ,IAAlB,EAApB;;AAEA,mBAAO,MAAMD,QAAQE,KAAR,QAAoB,+BAApB,CAAb;AAHW;AAId;AAlDO;;kBAqDGf,K","file":"route.js","sourcesContent":["\"use strict\";\n\nvar $methods = new WeakMap(),\n    $uri = new WeakMap(),\n    $action = new WeakMap(),\n    $name = new WeakMap(),\n    $prefix = new WeakMap(),\n    $bindings = new WeakMap();\n\nfunction trim(string) {\n    if (string.charAt(0) == \"/\") {\n        string = string.substr(1, string.length - 1);\n    }\n\n    if (string.charAt(string.length - 1) == \"/\") {\n        string = string.substr(0, string.length - 1);\n    }\n\n    return string;\n}\n\nclass Route {\n    constructor(methods, uri, action) {\n        $methods.set(this, methods);\n        $uri.set(this, trim(uri));\n        $action.set(this, action);\n        $name.set(this, null);\n        $prefix.set(this, null);\n        $bindings.set(this, {});\n    }\n\n    get methods() {\n        return $methods.get(this);\n    }\n\n    get uri() {\n        return $uri.get(this);\n    }\n\n    get action() {\n        return $action.get(this);\n    }\n\n    get name() {\n        return $name.get(this);\n    }\n\n    set name(value) {\n        $name.set(this, value);\n    }\n\n    get prefix() {\n        return $prefix.get(this);\n    }\n\n    set prefix(value) {\n        $prefix.set(this, trim(value));\n    }\n\n    get bindings() {\n        return $bindings.get(this);\n    }\n\n    get path() {\n        return ($prefix.get(this) !== null ? \"/\" + $prefix.get(this) : \"\") + \"/\" + $uri.get(this);\n    }\n\n    async handle() {\n        var handler = await $action.get(this).call();\n\n        return await handler.apply(this, Array.from(arguments));\n    }\n}\n\nexport default Route;"]}