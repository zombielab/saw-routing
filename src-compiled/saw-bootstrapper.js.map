{"version":3,"sources":["../src/saw-bootstrapper.js"],"names":["Bootstrapper","bootstrap","app","on","router","get","ctx","next","body","route_params","use","emit","dispatch"],"mappings":"AAAA;;;;;;;;;;AAEA;;;;AACA;;;;;;AAEA,MAAMA,YAAN,CAAmB;AACf,WAAOC,SAAP,CAAiBC,GAAjB,EAAsB;AAClBA,YAAIC,EAAJ,CAAO,gBAAP,EAAyB,UAAUC,MAAV,EAAkB;AACvCA,mBAAOC,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACjCD,oBAAIE,IAAJ,GAAW,SAAX;AACH,aAFD;;AAIAJ,mBAAOC,GAAP,CAAW,YAAX,EAAyB,CAACC,GAAD,EAAMC,IAAN,KAAe;AACpCD,oBAAIE,IAAJ,GAAW,WAAX;AACAF,oBAAIE,IAAJ,IAAYF,IAAIG,YAAJ,CAAiB,IAAjB,CAAZ;;AAEA,uBAAOF,MAAP;AACH,aALD;AAMH,SAXD;;AAaA;AACAL,YAAIQ,GAAJ;AAAA,uDAAQ,WAAMJ,GAAN,EAAWC,IAAX,EAAoB;AACxBL,oBAAIS,IAAJ,CAAS,gBAAT;;AAEA,uBAAO,MAAM,qBAAOC,QAAP,CAAgBN,GAAhB,EAAqBC,IAArB,CAAb;AACH,aAJD;;AAAA;AAAA;AAAA;AAAA;;AAMAL,YAAIQ,GAAJ;AAAA,wDAAQ,WAAMJ,GAAN,EAAWC,IAAX,EAAoB;AACxBD,oBAAIE,IAAJ,IAAY,UAAZ;AACH,aAFD;;AAAA;AAAA;AAAA;AAAA;AAGH;AAzBc;;kBA4BJR,Y","file":"saw-bootstrapper.js","sourcesContent":["\"use strict\";\n\nimport config from \"saw-config\";\nimport router from \"saw-routing\";\n\nclass Bootstrapper {\n    static bootstrap(app) {\n        app.on(\"route.register\", function (router) {\n            router.get(\"/\", function (ctx, next) {\n                ctx.body = \"bonjour\";\n            });\n\n            router.get(\"/test/{id}\", (ctx, next) => {\n                ctx.body = \"bonsoir: \";\n                ctx.body += ctx.route_params[\"id\"];\n\n                return next();\n            });\n        });\n\n        // Dispatch request to router\n        app.use(async(ctx, next) => {\n            app.emit(\"route.register\", router);\n\n            return await router.dispatch(ctx, next);\n        });\n\n        app.use(async(ctx, next) => {\n            ctx.body += \"--- OI !\";\n        });\n    }\n}\n\nexport default Bootstrapper;"]}