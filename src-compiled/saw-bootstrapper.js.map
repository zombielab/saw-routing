{"version":3,"sources":["../src/saw-bootstrapper.js"],"names":["Bootstrapper","bootstrap","app","on","collection","get","ctx","next","body","emit","use","dispatch"],"mappings":"AAAA;;;;;;;;;;AAEA;;;;AACA;;;;;;AAEA,MAAMA,YAAN,CAAmB;AACf,WAAOC,SAAP,CAAiBC,GAAjB,EAAsB;AAClBA,YAAIC,EAAJ,CAAO,gBAAP,EAAyB,UAAUC,UAAV,EAAsB;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEAA,uBAAWC,GAAX,CAAe,GAAf,EAAoB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACrCD,oBAAIE,IAAJ,GAAW,SAAX;AACH,aAFD;;AAIAJ,uBAAWC,GAAX,CAAe,GAAf,EAAoB,CAACC,GAAD,EAAMC,IAAN,KAAe;AAC/BD,oBAAIE,IAAJ,GAAW,SAAX;;AAEA,uBAAOD,MAAP;AACH,aAJD;AAKH,SApBD;;AAsBA;AACAL,YAAIO,IAAJ,CAAS,gBAAT;;AAEA;AACAP,YAAIQ,GAAJ;AAAA,uDAAQ,WAAOJ,GAAP,EAAYC,IAAZ,EAAqB;AACzB,uBAAO,MAAM,qBAAOI,QAAP,CAAgBL,GAAhB,EAAqBC,IAArB,CAAb;AACH,aAFD;;AAAA;AAAA;AAAA;AAAA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAzCc;;kBA4CJP,Y","file":"saw-bootstrapper.js","sourcesContent":["\"use strict\";\n\nimport config from \"saw-config\";\nimport router from \"saw-routing\";\n\nclass Bootstrapper {\n    static bootstrap(app) {\n        app.on(\"route.register\", function (collection) {\n            // collection.get(\"/\", function () {\n            //     return \"bonjour\";\n            // });\n\n            // collection.get(\"/\", function (ctx, next) {\n            //     ctx.body = \"bonjour\";\n            //\n            //     return next();\n            // });\n\n            collection.get(\"/\", function (ctx, next) {\n                ctx.body = \"bonjour\";\n            });\n\n            collection.get(\"/\", (ctx, next) => {\n                ctx.body = \"bonsoir\";\n\n                return next();\n            });\n        });\n\n        //\n        app.emit(\"route.register\", router);\n\n        // Dispatch router\n        app.use(async (ctx, next) => {\n            return await router.dispatch(ctx, next);\n        });\n\n        // app.use(async (ctx, next) => {\n        //     app.emit(\"route.register\", router);\n        //\n        //     var route = router.match(ctx.request);\n        //\n        //     console.log(route.uri);\n        //\n        //     return next();\n        // });\n    }\n}\n\nexport default Bootstrapper;"]}