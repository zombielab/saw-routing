{"version":3,"sources":["../src/saw-bootstrapper.js"],"names":["Bootstrapper","bootstrap","app","use","ctx","next","router","request","route","params","emit","dispatch"],"mappings":"AAAA;;;;;;;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,YAAN,CAAmB;AACf,WAAOC,SAAP,CAAiBC,GAAjB,EAAsB;AAClBA,YAAIC,GAAJ;AAAA,uDAAQ,WAAMC,GAAN,EAAWC,IAAX,EAAoB;AACxB,8BAAIC,MAAJ;AACA,8BAAIC,OAAJ,GAAcH,IAAIG,OAAlB;;AAEAH,oBAAIG,OAAJ,CAAYC,KAAZ,GAAoB,IAApB;AACAJ,oBAAIG,OAAJ,CAAYE,MAAZ,GAAqB,EAArB;;AAEAP,oBAAIQ,IAAJ,CAAS,yBAAT;;AAEA,uBAAO,MAAM,qBAAOC,QAAP,CAAgBP,GAAhB,EAAqBC,IAArB,CAAb;AACH,aAVD;;AAAA;AAAA;AAAA;AAAA;AAWH;AAbc;;kBAgBJL,Y","file":"saw-bootstrapper.js","sourcesContent":["\"use strict\";\n\nimport config from \"saw-config\";\nimport router from \"saw-routing\";\nimport url from \"saw-routing/lib/url\";\n\nclass Bootstrapper {\n    static bootstrap(app) {\n        app.use(async(ctx, next) => {\n            url.router = router;\n            url.request = ctx.request;\n\n            ctx.request.route = null;\n            ctx.request.params = {};\n\n            app.emit(\"routing: route.register\", router);\n\n            return await router.dispatch(ctx, next);\n        });\n    }\n}\n\nexport default Bootstrapper;"]}